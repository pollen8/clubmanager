{"ast":null,"code":"import _objectSpread from \"/home/rob/personal/cra-test/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/rob/personal/cra-test/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/rob/personal/cra-test/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/rob/personal/cra-test/src/Season/components/SeasonForm.tsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation AddSeason($startDate: String!, $endDate: String!, $visitorFee: Int) {\\n    addSeason(startDate: $startDate, endDate: $endDate, visitorFee: $visitorFee) {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport gql from 'graphql-tag';\nimport React, { useEffect, useState } from 'react';\nimport { Mutation } from 'react-apollo';\nimport DatePicker from 'react-date-picker';\nimport { IoIosAddCircle } from 'react-icons/io';\nimport { Button, CardBody, FormGroup, Input, Label, ModalFooter, SlidePanelBody } from '../../app/components/Layout';\nimport { FILTER_SEASONS } from '../Season';\nvar endDate = new Date();\nendDate.setFullYear(new Date().getFullYear() + 1);\nvar blank = {\n  startDate: new Date(),\n  endDate: endDate,\n  id: '',\n  visitorFee: 7\n};\nvar ADD_SEASON = gql(_templateObject());\nexport var SeasonForm = function SeasonForm(_ref) {\n  var initialData = _ref.initialData,\n      setSelected = _ref.setSelected;\n\n  var _useState = useState(blank),\n      _useState2 = _slicedToArray(_useState, 2),\n      season = _useState2[0],\n      setSeason = _useState2[1];\n\n  useEffect(function () {\n    if (initialData !== null) {\n      setSeason(initialData);\n    } else {\n      setSeason(blank);\n    }\n  }, [initialData]);\n  return React.createElement(Mutation, {\n    mutation: ADD_SEASON,\n    update: function update(cache, _ref2) {\n      var addSeason = _ref2.data.addSeason;\n      var c = cache.readQuery({\n        query: FILTER_SEASONS\n      });\n      console.log('cache', c);\n      var filterSeasons = c.filterSeasons;\n      cache.writeQuery({\n        query: FILTER_SEASONS,\n        data: {\n          filterSeasons: filterSeasons.concat([addSeason])\n        }\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, function (addSeason, _ref3) {\n    var data = _ref3.data;\n    return React.createElement(SlidePanelBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(CardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Start date\"), React.createElement(DatePicker, {\n      value: season.startDate,\n      onChange: function onChange(v) {\n        var startDate = Array.isArray(v) ? v[0] : v;\n        setSeason(_objectSpread({}, season, {\n          startDate: startDate\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })), React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"End date\"), React.createElement(DatePicker, {\n      value: season.endDate,\n      onChange: function onChange(v) {\n        var endDate = Array.isArray(v) ? v[0] : v;\n        setSeason(_objectSpread({}, season, {\n          endDate: endDate\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    })), React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Label, {\n      htmlFor: \"visitorFee\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Visitor fee\"), React.createElement(Input, {\n      name: \"visitorFee\",\n      id: \"visitorFee\",\n      value: String(season.visitorFee),\n      onChange: function onChange(e) {\n        return setSeason(_objectSpread({}, season, {\n          visitorFee: e.target.value\n        }));\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }))), React.createElement(ModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Button, {\n      outline: true,\n      onClick: function onClick() {\n        return setSelected(null);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Clear\"), React.createElement(Button, {\n      onClick: function onClick() {\n        console.log('season', season); // season.id === ''\n        //   ? addSeason(season.startDate, season.endDate)\n        //   : editSeason(season)\n\n        addSeason({\n          variables: {\n            startDate: season.startDate,\n            endDate: season.endDate\n          }\n        });\n        setSeason(blank);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(IoIosAddCircle, {\n      size: \"1rem\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), initialData === null ? 'Add' : 'Update')));\n  });\n};","map":{"version":3,"sources":["/home/rob/personal/cra-test/src/Season/components/SeasonForm.tsx"],"names":["gql","React","useEffect","useState","Mutation","DatePicker","IoIosAddCircle","Button","CardBody","FormGroup","Input","Label","ModalFooter","SlidePanelBody","FILTER_SEASONS","endDate","Date","setFullYear","getFullYear","blank","startDate","id","visitorFee","ADD_SEASON","SeasonForm","initialData","setSelected","season","setSeason","cache","addSeason","data","c","readQuery","query","console","log","filterSeasons","writeQuery","concat","v","Array","isArray","String","e","target","value","variables"],"mappings":";;;;;;;;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,aAAhB;AACA,OAAOC,KAAP,IAEEC,SAFF,EAGEC,QAHF,QAIO,OAJP;AAKA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,SAASC,cAAT,QAA+B,gBAA/B;AAEA,SACEC,MADF,EAEEC,QAFF,EAGEC,SAHF,EAIEC,KAJF,EAKEC,KALF,EAMEC,WANF,EAOEC,cAPF,QAQO,6BARP;AASA,SAASC,cAAT,QAA+B,WAA/B;AAQA,IAAMC,OAAO,GAAG,IAAIC,IAAJ,EAAhB;AACAD,OAAO,CAACE,WAAR,CAAoB,IAAID,IAAJ,GAAWE,WAAX,KAA2B,CAA/C;AACA,IAAMC,KAAc,GAAG;AACrBC,EAAAA,SAAS,EAAE,IAAIJ,IAAJ,EADU;AAErBD,EAAAA,OAAO,EAAPA,OAFqB;AAGrBM,EAAAA,EAAE,EAAE,EAHiB;AAIrBC,EAAAA,UAAU,EAAE;AAJS,CAAvB;AAOA,IAAMC,UAAU,GAAGvB,GAAH,mBAAhB;AAQA,OAAO,IAAMwB,UAAsB,GAAG,SAAzBA,UAAyB,OAAkC;AAAA,MAA/BC,WAA+B,QAA/BA,WAA+B;AAAA,MAAlBC,WAAkB,QAAlBA,WAAkB;;AAAA,kBAC1CvB,QAAQ,CAAUgB,KAAV,CADkC;AAAA;AAAA,MAC/DQ,MAD+D;AAAA,MACvDC,SADuD;;AAGtE1B,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIuB,WAAW,KAAK,IAApB,EAA0B;AACxBG,MAAAA,SAAS,CAACH,WAAD,CAAT;AACD,KAFD,MAEO;AACLG,MAAAA,SAAS,CAACT,KAAD,CAAT;AACD;AACF,GANQ,EAMN,CAACM,WAAD,CANM,CAAT;AAOA,SACE,oBAAC,QAAD;AACE,IAAA,QAAQ,EAAEF,UADZ;AAEE,IAAA,MAAM,EAAE,gBAACM,KAAD,SAAoC;AAAA,UAAlBC,SAAkB,SAA1BC,IAA0B,CAAlBD,SAAkB;AAC1C,UAAME,CAAC,GAAGH,KAAK,CAACI,SAAN,CAAqB;AAAEC,QAAAA,KAAK,EAAEpB;AAAT,OAArB,CAAV;AACAqB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBJ,CAArB;AAF0C,UAGlCK,aAHkC,GAGhBL,CAHgB,CAGlCK,aAHkC;AAI1CR,MAAAA,KAAK,CAACS,UAAN,CAAiB;AACfJ,QAAAA,KAAK,EAAEpB,cADQ;AAEfiB,QAAAA,IAAI,EAAE;AAAEM,UAAAA,aAAa,EAAEA,aAAa,CAACE,MAAd,CAAqB,CAACT,SAAD,CAArB;AAAjB;AAFS,OAAjB;AAID,KAVH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWG,UAACA,SAAD;AAAA,QAAcC,IAAd,SAAcA,IAAd;AAAA,WACC,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEE,oBAAC,UAAD;AACE,MAAA,KAAK,EAAEJ,MAAM,CAACP,SADhB;AAEE,MAAA,QAAQ,EAAE,kBAACoB,CAAD,EAAO;AACf,YAAMpB,SAAS,GAAGqB,KAAK,CAACC,OAAN,CAAcF,CAAd,IAAmBA,CAAC,CAAC,CAAD,CAApB,GAA0BA,CAA5C;AACAZ,QAAAA,SAAS,mBACJD,MADI;AAEPP,UAAAA,SAAS,EAATA;AAFO,WAAT;AAID,OARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,EAcE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE,oBAAC,UAAD;AACE,MAAA,KAAK,EAAEO,MAAM,CAACZ,OADhB;AAEE,MAAA,QAAQ,EAAE,kBAACyB,CAAD,EAAO;AACf,YAAMzB,OAAO,GAAG0B,KAAK,CAACC,OAAN,CAAcF,CAAd,IAAmBA,CAAC,CAAC,CAAD,CAApB,GAA0BA,CAA1C;AACAZ,QAAAA,SAAS,mBACJD,MADI;AAEPZ,UAAAA,OAAO,EAAPA;AAFO,WAAT;AAID,OARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAdF,EA2BE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAIE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,YAAZ;AACE,MAAA,EAAE,EAAC,YADL;AAEE,MAAA,KAAK,EAAE4B,MAAM,CAAChB,MAAM,CAACL,UAAR,CAFf;AAGE,MAAA,QAAQ,EAAE,kBAACsB,CAAD;AAAA,eAAOhB,SAAS,mBACrBD,MADqB;AAExBL,UAAAA,UAAU,EAAEsB,CAAC,CAACC,MAAF,CAASC;AAFG,WAAhB;AAAA,OAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CA3BF,CADF,EA0CE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,OAAO,MADT;AAEE,MAAA,OAAO,EAAE;AAAA,eAAMpB,WAAW,CAAC,IAAD,CAAjB;AAAA,OAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAOE,oBAAC,MAAD;AACE,MAAA,OAAO,EAAE,mBAAM;AACbS,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBT,MAAtB,EADa,CAEb;AACA;AACA;;AACAG,QAAAA,SAAS,CAAC;AAAEiB,UAAAA,SAAS,EAAE;AAAE3B,YAAAA,SAAS,EAAEO,MAAM,CAACP,SAApB;AAA+BL,YAAAA,OAAO,EAAEY,MAAM,CAACZ;AAA/C;AAAb,SAAD,CAAT;AACAa,QAAAA,SAAS,CAACT,KAAD,CAAT;AACD,OARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASE,oBAAC,cAAD;AAAgB,MAAA,IAAI,EAAC,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,EAUGM,WAAW,KAAK,IAAhB,GAAuB,KAAvB,GAA+B,QAVlC,CAPF,CA1CF,CADD;AAAA,GAXH,CADF;AA+ED,CAzFM","sourcesContent":["import gql from 'graphql-tag';\nimport React, {\n  FC,\n  useEffect,\n  useState,\n} from 'react';\nimport { Mutation } from 'react-apollo';\nimport DatePicker from 'react-date-picker';\nimport { IoIosAddCircle } from 'react-icons/io';\n\nimport {\n  Button,\n  CardBody,\n  FormGroup,\n  Input,\n  Label,\n  ModalFooter,\n  SlidePanelBody,\n} from '../../app/components/Layout';\nimport { FILTER_SEASONS } from '../Season';\nimport { ISeason } from '../seasonState';\n\ninterface IProps {\n  initialData: null | ISeason;\n  setSelected: any;\n}\n\nconst endDate = new Date();\nendDate.setFullYear(new Date().getFullYear() + 1);\nconst blank: ISeason = {\n  startDate: new Date(),\n  endDate,\n  id: '',\n  visitorFee: 7,\n};\n\nconst ADD_SEASON = gql`\n  mutation AddSeason($startDate: String!, $endDate: String!, $visitorFee: Int) {\n    addSeason(startDate: $startDate, endDate: $endDate, visitorFee: $visitorFee) {\n      id\n    }\n  }\n`;\n\nexport const SeasonForm: FC<IProps> = ({ initialData, setSelected }) => {\n  const [season, setSeason] = useState<ISeason>(blank);\n\n  useEffect(() => {\n    if (initialData !== null) {\n      setSeason(initialData);\n    } else {\n      setSeason(blank);\n    }\n  }, [initialData]);\n  return (\n    <Mutation\n      mutation={ADD_SEASON}\n      update={(cache, { data: { addSeason } }) => {\n        const c = cache.readQuery<any>({ query: FILTER_SEASONS });\n        console.log('cache', c);\n        const { filterSeasons } = c;\n        cache.writeQuery({\n          query: FILTER_SEASONS,\n          data: { filterSeasons: filterSeasons.concat([addSeason]) },\n        });\n      }}>\n      {(addSeason, { data }) => (\n        <SlidePanelBody>\n          <CardBody>\n            <FormGroup>\n              <Label>Start date</Label>\n              <DatePicker\n                value={season.startDate}\n                onChange={(v) => {\n                  const startDate = Array.isArray(v) ? v[0] : v;\n                  setSeason({\n                    ...season,\n                    startDate,\n                  })\n                }}\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label>End date</Label>\n              <DatePicker\n                value={season.endDate}\n                onChange={(v) => {\n                  const endDate = Array.isArray(v) ? v[0] : v;\n                  setSeason({\n                    ...season,\n                    endDate,\n                  })\n                }}\n              />\n            </FormGroup>\n            <FormGroup>\n              <Label htmlFor=\"visitorFee\">\n                Visitor fee\n          </Label>\n              <Input name=\"visitorFee\"\n                id=\"visitorFee\"\n                value={String(season.visitorFee)}\n                onChange={(e) => setSeason({\n                  ...season,\n                  visitorFee: e.target.value,\n                })} />\n            </FormGroup>\n\n          </CardBody>\n          <ModalFooter>\n            <Button\n              outline\n              onClick={() => setSelected(null)}>\n              Clear\n         </Button>\n\n            <Button\n              onClick={() => {\n                console.log('season', season);\n                // season.id === ''\n                //   ? addSeason(season.startDate, season.endDate)\n                //   : editSeason(season)\n                addSeason({ variables: { startDate: season.startDate, endDate: season.endDate } });\n                setSeason(blank);\n              }}>\n              <IoIosAddCircle size=\"1rem\" />\n              {initialData === null ? 'Add' : 'Update'}\n            </Button>\n          </ModalFooter>\n        </SlidePanelBody>\n      )}\n    </Mutation>\n  )\n}"]},"metadata":{},"sourceType":"module"}