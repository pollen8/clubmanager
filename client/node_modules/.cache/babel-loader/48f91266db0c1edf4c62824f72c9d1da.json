{"ast":null,"code":"import _classCallCheck from \"/home/rob/personal/clubmanager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/rob/personal/clubmanager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/rob/personal/clubmanager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/rob/personal/clubmanager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/rob/personal/clubmanager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _regeneratorRuntime from \"/home/rob/personal/clubmanager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/rob/personal/clubmanager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/rob/personal/clubmanager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"/home/rob/personal/clubmanager/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/rob/personal/clubmanager/client/src/Routes.tsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  height: 100%;\\n  color: \", \";\\n  display: flex;\\n  flex-direction: column;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport './App.css';\nimport ApolloClient from 'apollo-boost';\nimport React, { Component, createContext } from 'react';\nimport { ApolloProvider } from 'react-apollo';\nimport { ApolloProvider as ApolloHooksProvider } from 'react-apollo-hooks';\nimport { Route, Router } from 'react-router-dom';\nimport styled, { ThemeProvider } from 'styled-components';\nimport { App } from './App';\nimport auth, { Auth } from './Auth/Auth';\nimport Callback from './Callback/Callback';\nimport history from './history';\nimport { Home } from './Home';\nimport { theme } from './theme';\nvar Background = styled.div(_templateObject(), function (_ref) {\n  var theme = _ref.theme;\n  return theme.grey800;\n}); // const auth = new Auth();\n\nexport var AuthContext = createContext(auth);\n\nvar handleAuthentication = function handleAuthentication(_ref2) {\n  var location = _ref2.location;\n\n  if (/access_token|id_token|error/.test(location.hash)) {\n    auth.handleAuthentication();\n  }\n};\n/*\nrequest: (operation) => {\n    operation.setContext((context) => ({\n      headers: {\n        ...context.headers,\n        authorization: auth.getIdToken(),\n      },\n    }));\n  },\n  */\n\n\nconsole.log('auth, ', Auth, auth, auth.getIdToken());\nvar client = new ApolloClient({\n  request: function () {\n    var _request = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(operation) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              debugger;\n              operation.setContext(function (context) {\n                return {\n                  headers: _objectSpread({}, context.headers, {\n                    authorization: auth.getIdToken()\n                  })\n                };\n              });\n              return _context.abrupt(\"return\", undefined);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function request(_x) {\n      return _request.apply(this, arguments);\n    }\n\n    return request;\n  }(),\n  uri: 'http://localhost:4000'\n});\n\nvar Routes =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Routes, _Component);\n\n  function Routes() {\n    _classCallCheck(this, Routes);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Routes).apply(this, arguments));\n  }\n\n  _createClass(Routes, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Router, {\n        history: history,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(ThemeProvider, {\n        theme: theme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(ApolloProvider, {\n        client: client,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(ApolloHooksProvider, {\n        client: client,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(AuthContext.Provider, {\n        value: auth,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Background, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/\",\n        render: function render(props) {\n          return React.createElement(App, Object.assign({}, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/home\",\n        render: function render(props) {\n          return React.createElement(Home, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/callback\",\n        component: Callback,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return Routes;\n}(Component);\n\nexport default Routes;","map":{"version":3,"sources":["/home/rob/personal/clubmanager/client/src/Routes.tsx"],"names":["ApolloClient","React","Component","createContext","ApolloProvider","ApolloHooksProvider","Route","Router","styled","ThemeProvider","App","auth","Auth","Callback","history","Home","theme","Background","div","grey800","AuthContext","handleAuthentication","location","test","hash","console","log","getIdToken","client","request","operation","setContext","context","headers","authorization","undefined","uri","Routes","props"],"mappings":"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","sourcesContent":["import './App.css';\n\nimport ApolloClient from 'apollo-boost';\nimport React, {\n  Component,\n  createContext,\n} from 'react';\nimport { ApolloProvider } from 'react-apollo';\nimport { ApolloProvider as ApolloHooksProvider } from 'react-apollo-hooks';\nimport {\n  Route,\n  Router,\n} from 'react-router-dom';\nimport styled, { ThemeProvider } from 'styled-components';\n\nimport { App } from './App';\nimport auth, { Auth } from './Auth/Auth';\nimport Callback from './Callback/Callback';\nimport history from './history';\nimport { Home } from './Home';\nimport { theme } from './theme';\n\nconst Background = styled.div`\n  height: 100%;\n  color: ${({ theme }) => theme.grey800};\n  display: flex;\n  flex-direction: column;\n`;\n\n// const auth = new Auth();\n\nexport const AuthContext = createContext<Auth>(auth);\n\nconst handleAuthentication = ({ location }: any) => {\n  if (/access_token|id_token|error/.test(location.hash)) {\n    auth.handleAuthentication();\n  }\n}\n\n/*\nrequest: (operation) => {\n    operation.setContext((context) => ({\n      headers: {\n        ...context.headers,\n        authorization: auth.getIdToken(),\n      },\n    }));\n  },\n  */\nconsole.log('auth, ', Auth, auth, auth.getIdToken());\nconst client = new ApolloClient({\n  request: async (operation) => {\n    debugger;\n    operation.setContext((context: any) => ({\n      headers: {\n        ...context.headers,\n        authorization: auth.getIdToken(),\n      },\n    }));\n    return undefined;\n  },\n  uri: 'http://localhost:4000',\n});\n\nclass Routes extends Component {\n\n  render() {\n    return (\n      <Router history={history}>\n        <ThemeProvider theme={theme}>\n          <ApolloProvider client={client}>\n            <ApolloHooksProvider client={client}>\n              <AuthContext.Provider value={auth}>\n                <Background>\n                  <Route path=\"/\" render={(props: any) => <App {...props} />} />\n                  <Route path=\"/home\" render={(props: any) => <Home />} />\n                  <Route path=\"/callback\" component={Callback} />\n                </Background>\n              </AuthContext.Provider>\n            </ApolloHooksProvider>\n          </ApolloProvider>\n        </ThemeProvider>\n      </Router >\n    );\n  }\n}\n\nexport default Routes;\n"]},"metadata":{},"sourceType":"module"}